# 计算机网络 Lab1 无线信号感知与室内定位



- 传统应用场景
  - ibeacon
  - ios室内定位
  - LBS

- 无线信号指纹定位法

- 三角定位法

  - 输入三个坐标以及三个距离 
  - 输出位置坐标

- 查询设备地址mac，在*时间点loctime*的坐标

  - 设置滑动时间窗口开始时间为(loctime-59秒)，结束时间为loctime
  - 基于这个滑动时间窗口T=1分钟以内的数据，查询该设备mac是否被若干网关抓到
  - 每个抓到该设备的网关信号强度在T时间内，做平均，得到平均强度
  - 基于得到的平均强度，计算该设备到每个网关的距离
  - 基于该设备到A网关和B网关的距离，得到该设备距A网关和B网关坐标的相对权重
  - 基于每个相对权重，进行【加权平均】，估算该设坐标备(x,y)；若干个相对权重，得到若干个估计值(x, y)
  - 对得到的若干个估计值(x, y)，做平均，得到最终该设备的x和y坐标

- 定位点连线生成平滑轨迹

  - 根据前后数据生成滑动平均
  - 控制时间粒度

- 骨架约束

- 内部路由

- 实时轨迹与历史轨迹



- 设备：datasky wifi探针

- 实现步骤
  - 读文档：wifi信号格式
  - 搭建服务器与sql数据库
  - 发送web请求采集信号发送到服务器
  - 用无线网关设备采集wifi信号
  - 手持wifi设备计算手持设备位置
- 结果展示
  - 至少三个室内固定测试位置
  - 在每个测试位置上静止一段时间
  - 计算定位位置并在网页上画出定位位置和测试位置以及显示误差
  - 5.8
    - 课堂汇报
    - 提交内容
      - 源代码
      - 算法解释
      - 定位结果：前端可视化截图
      - 结果分析


- 算法
  - 可使用rssi信号或range信号
    - rssi to distance: 10^((-69-RSSI)/10*N) N 自选 2-4
  - 抛掉大于13的噪声值

- 算法1 距离归一化位置加权
- 算法2 rssi 归一化位置加权
- 算法3 距离 几何平均法
- 算法4 rssi 几何平均法





- workflow
  - 5.1
    - 配置wifi网关
    - 配置mysql数据库
    - 实现数据格式解析
  - 5.2
    - 设备抓包
    - 位置计算算法（初步）
  - 5.6
    - 前端图像生成
    - 位置计算算法（进阶）
  - 5.7
    - 调参 加误差
    - 程序注释&算法完工
    - 传github 改前端展示
    - 报告 PPT